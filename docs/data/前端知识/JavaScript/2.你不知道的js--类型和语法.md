---
title: 重读《你不知道的JavaScript》（中）- 类型和语法
desc: 重读《你不知道的JS》系列之类型和语法
label:
  - JavaScript
date: 2025-06-24
---

## 类型

### 内置类型

- 空值（`null`）
- 为定义（`undefined`）
- 布尔值（`boolean`）
- 数字（`number`）
- 字符串（`string`）
- 对象（`object`）
- 符号（`symbol`，ES6 新增）
- 大数字（`BigInt`，ES2020 新增）

类型判断：

```javascript
typeof undefined; // "undefined"
typeof true; // "boolean"
typeof 123; // "number"
typeof 'hello'; // "string"
typeof {}; // "object"
typeof Symbol('foo'); // "symbol"
```

以上六种均有同名字符串与之对应。

`null` 是基本类型中唯一的一个“假值”类型，`typeof` 对它的返回值为 `object`。

```javascript
typeof null; // "object"
```

还有一种情况，`function`（函数）也是 `JavaScript` 的一个内置类型。函数是“可调用对象”，它有一个内部属性 `[[Call]]`，该属性使其可以被调用。

```javascript
typeof function () {}; // "function"
```

数组也是 `object` 的一个“子类型”。

```javascript
typeof []; // "object"
```

### 值与类型

`JavaScript` 中的变量是没有类型的，只有值才有。变量可以随时持有任何类型的值。

变量在未持有值的时候为 `undefined`。此时 `typeof` 返 `undefined`

访问一个不存在的变量会报 `ReferenceError` 错误。而对一个不存在的变量使用 `typeof` 则会返回 `undefined`。

```javascript
var a;
typeof a; // "undefined"

console.log(b); // ReferenceError: b is not defined
typeof b; // "undefined"
```

与变量不同，访问不存在的对象属性（甚至是在全局对象 window 上）不会产生 `ReferenceError` 错误。

## 值

### 数组

数组可以容纳任何类型的值，可以是字符串、数字、对象（`object`），甚至是其他数组。

对数组声明后即可向其中加入值，不需要预先设定大小。

```javascript
var a = [];
a.length; // 0
a[0] = 1;
a[1] = '2';
a[2] = [3];
a.length; // 3
```

此外，还可以创建稀疏数组：

```javascript
var a = [];
a[0] = 1;
// 此处没有设置a[1]单元
a[2] = [3];
a[1]; // undefined
a.length; // 3
```

数组通过数字进行索引，但有趣的是它们也是对象，所以也可以包含字符串键值和属性（但这些并不计算在数组长度内）：

```javascript
var a = [];
a[0] = 1;
a['foobar'] = 2;
a.length; // 1
a['foobar']; // 2
a.foobar; // 2
```

这里有个问题需要特别注意，如果字符串键值能够被强制类型转换为十进制数字的话，它就会被当作数字索引来处理。

```javascript
var a = [];
a['13'] = 42;
a.length; // 14
```

#### 类数组

有时需要将类数组（一组通过数字索引的值）转换为真正的数组，这一般通过数组工具函数（如` indexOf(..)`、`concat(..)`、`forEach(..)` 等）来实现。

例如，一些 DOM 查询操作会返回 DOM 元素列表，它们并非真正意义上的数组，但十分类似。

### 字符串
